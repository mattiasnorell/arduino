
<html>
    <head>
        <style type="text/css">
            h1{
                text-align: center;
            }

            .editor{
                position: relative;
                margin:0 auto;
                width: 600px;
                height: 400px;
                background: #ccc;
                background-image: url(editorbg.jpg)
            }

            .output{
                position: relative;
                margin:0 auto;
                width: 600px;
                height: 300px;
                background: #ccc;
                padding: 20px;
                box-sizing: border-box;
            }

            .output .pattern-output{
                width: 100%;
                height: 150px;
                white-space:normal;
                overflow: auto;
                background-color: #fff;
                padding: 20px;
                box-sizing: border-box;
            }

            .output .pattern-output ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .output .pattern-output ul li span:first-child{
                position: relative;
                float: left;
                width: 100px;
            }

            .output .pattern-output ul li span:last-child{
                position: relative;
                letter-spacing: 5;
            }

            #current-pattern{
                padding: 0px 10px 0px 10px;
                background-color: #fff;
                text-align: center;
                
            }

            .input-checkbox{
                position: absolute;
            }
            
            .input-checkbox:checked{
                box-shadow: 0px 0px 15px yellow;
            }
            
            .input-checkbox-1{
                top: 13px;
                left: 410px;
            }

            .input-checkbox-2{
                top: 157px;
                left: 486px;
            }

            .input-checkbox-3{
                top: 193px;
                left: 507px;
            }

            .input-checkbox-4{
                top: 195px;
                left: 448px;
            }

            .input-checkbox-5{
                top: 207px;
                left: 414px;
            }

            .input-checkbox-6{
                top: 157px;
                left: 336px;
            }

            .input-checkbox-7{
                top: 329px;
                left: 362px;
            }

            .input-checkbox-8{
                top: 279px;
                left: 302px;
            }

            .input-checkbox-9{
                top: 257px;
                left: 234px;
            }

            .input-checkbox-10{
                top: 219px;
                left: 238px;
            }

            .input-checkbox-11{
                top: 184px;
                left: 202px;
            }

            .input-checkbox-12{
                top: 309px;
                left: 122px;
            }

            .input-checkbox-13{
                top: 198px;
                left: 62px;
            }

            .input-checkbox-14{
                top: 263px;
                left: 36px;            
            }
        </style>
    </head>

    <body>
        <h1>Ugly Christmas Admin</h1>
        <div class="editor">
            <input type="checkbox" class="input-checkbox input-checkbox-1" id="input-checkbox-1">
            <input type="checkbox" class="input-checkbox input-checkbox-2" id="input-checkbox-2">
            <input type="checkbox" class="input-checkbox input-checkbox-3" id="input-checkbox-3">
            <input type="checkbox" class="input-checkbox input-checkbox-4" id="input-checkbox-4">
            <input type="checkbox" class="input-checkbox input-checkbox-5" id="input-checkbox-5">
            <input type="checkbox" class="input-checkbox input-checkbox-6" id="input-checkbox-6">
            <input type="checkbox" class="input-checkbox input-checkbox-7" id="input-checkbox-7">
            <input type="checkbox" class="input-checkbox input-checkbox-8" id="input-checkbox-8">
            <input type="checkbox" class="input-checkbox input-checkbox-9" id="input-checkbox-9">
            <input type="checkbox" class="input-checkbox input-checkbox-10" id="input-checkbox-10">
            <input type="checkbox" class="input-checkbox input-checkbox-11" id="input-checkbox-11">
            <input type="checkbox" class="input-checkbox input-checkbox-12" id="input-checkbox-12">
            <input type="checkbox" class="input-checkbox input-checkbox-13" id="input-checkbox-13">
            <input type="checkbox" class="input-checkbox input-checkbox-14" id="input-checkbox-14">
        </div>

        <div class="output">
            
            <div class="pattern-output" id="pattern-output"></div>
            <hr/>
            <button onclick="previousPattern()">Previous pattern</button>
            <span id="current-pattern"></span>
            <button onclick="nextPattern()">Next pattern</button>
            <hr/>
            <button onclick="play()">Play</button>
            <button onclick="stop()">Stop</button>
            Speed: <input type="number" value="500" id="interval-speed">
            <hr/>
            <button onclick="updatePattern()">Update pattern</button>
            <button onclick="addPattern()">Add pattern</button>
            <button onclick="removePattern()">Remove pattern</button>
            <button onclick="load()">Load</button>
        </div>
    </body>

    <script>
        var pattern = [];
        var playInterval = null;
        var diodCount = 14;
        var currentPattern = 0;

        update();

        function update(){
            document.getElementById("current-pattern").innerText = (currentPattern + 1) + "/" + pattern.length;
            document.getElementById("pattern-output").innerHTML = JSON.stringify(pattern, function(k,v){
                console.log(k, v)
   if(v instanceof Array){
       var returnValue = "<ul>";
       for(var i = 0; i < v.length; i++){
            returnValue += "<li><span>Pattern " + (i+1) + ":</span><span>" + JSON.stringify(v[i]) + "</span></li>";
        }
        returnValue+= "</ul>";

        return returnValue;
            }
   return v;
},4);
            updateSequencer();
        }

        function nextPattern(){
            currentPattern++;

            if(currentPattern > pattern.length -1 ){
                currentPattern = 0;
            }

            update();
        }

        function previousPattern(){
            currentPattern--;

            if(currentPattern < 0){
                currentPattern = pattern.length - 1;
            }

            update();
        }

        function play(){
            if(playInterval != null){
                return;
            }

            var playIntervalSpeed = parseInt(document.getElementById("interval-speed").value);

            playInterval = setInterval(function(){
                nextPattern();
            }, playIntervalSpeed);
        }

        function stop(){
            clearInterval(playInterval);
            playInterval = null;
        }

        function getDiodStates(){
            var model = [];

            for(var i = 0; i < diodCount; i++){
                var inputElementId = "input-checkbox-" + (i + 1);
                
                var value = document.getElementById(inputElementId).checked ? 1 : 0;
                
                model.push(value);
            }

            return model;
        }

        function updatePattern(){         
            pattern[currentPattern] = getDiodStates();

            update();
        }

        function addPattern(){      
            pattern[pattern.length] = getDiodStates();
            currentPattern = pattern.length - 1;

            update();
        }

        function updatePattern(){
            var model = [];

            for(var i = 0; i < diodCount; i++){
                var patternItem = pattern[currentPattern][i];
                var inputElementId = "input-checkbox-" + (i + 1);
                
                var value = document.getElementById(inputElementId).checked ? 1 : 0;
                
                model.push(value);
            }

            pattern[currentPattern] = model;

            update();
        }

        function removePattern(){
            pattern.splice(currentPattern, 1);
            previousPattern();
        }

        function load(){
            var input = prompt("Import JSON");
            pattern = JSON.parse(input);

            update();
        }

        function updateSequencer(){
            for(var i = 0; i < pattern[currentPattern].length; i++){
                var patternItem = pattern[currentPattern][i];
                var inputElementId = "input-checkbox-" + (i + 1);
                
                document.getElementById(inputElementId).checked = patternItem === 1;
            }
        }
    </script>
</html>